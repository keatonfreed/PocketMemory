{
    "name":"PocketMemory",
    "type": "object",
    "additionalProperties": false,
    "required": ["actions"],
    "properties": {
        "actions": {
            "type": "array",
            "minItems": 1,
            "items": {
                "anyOf": [
                    {
                        "type": "object",
                        "additionalProperties": false,
                        "required": ["actionType", "actionPayload"],
                        "properties": {
                            "actionType": {
                                "type": "string",
                                "enum": ["createDocument"],
                                "description": "Create a new document."
                            },
                            "actionPayload": {
                                "anyOf": [
                                    
                                    {
                                        "type": "object",
                                        "additionalProperties": false,
                                        "required": ["docTitle", "docSummary", "docType", "docContent", "docTags"],
                                        "properties": {
                                            "docTitle": {
                                                "type": "string",
                                                "description":
                                                    "Short human-friendly title for the new document. Must be unique (app will enforce)."
                                            },
                                            "docSummary": {
                                                "type": "string",
                                                "description": "Concise one-sentence summary of the document."
                                            },
                                            "docType": {
                                                "type": "string",
                                                "enum": ["note"],
                                                "description": "Document type."
                                            },
                                            "docContent": {
                                                "type": "string",
                                                "description": "Full initial content of the document."
                                            },
                                            "docTags": {
                                                "type": "array",
                                                "description": "Optional tags for organizing documents.",
                                                "maxItems": 3,
                                                "items": { "type": "string" }
                                            }
                                        }
                                    },

                                    {
                                        "type": "object",
                                        "additionalProperties": false,
                                        "required": ["docTitle", "docSummary", "docType", "docTags", "docContent", "docMetadata"],
                                        "properties": {
                                            "docTitle": {
                                                "type": "string",
                                                "description":
                                                    "Short human-friendly title for the new document. Must be unique (app will enforce)."
                                            },
                                            "docSummary": {
                                                "type": "string",
                                                "description": "Concise one-sentence summary of the document."
                                            },
                                            "docType": {
                                                "type": "string",
                                                "enum": ["list"],
                                                "description": "Document type."
                                            },
                                            "docTags": {
                                                "type": "array",
                                                "description": "Optional tags for organizing documents.",
                                                "maxItems": 3,
                                                "items": { "type": "string" }
                                            },
                                            "docContent": {
                                                "type": "array",
                                                "description": "Initial items of the list document.",
                                                "items": { "type": "string" }
                                            },
                                            "docMetadata": {
                                                "type": "object",
                                                "additionalProperties": false,
                                                "required": ["listType"],
                                                "properties": {
                                                    "listType": {
                                                        "type": "string",
                                                        "enum": ["normal", "grocery"],
                                                        "description":
                                                            "Type of list, either normal or specific to a grocery or store list."
                                                    }
                                                }
                                            }
                                        }
                                    }
                                ]
                            }
                        }
                    },

                    {
                        "type": "object",
                        "additionalProperties": false,
                        "required": ["actionType", "actionPayload"],
                        "properties": {
                            "actionType": {
                                "type": "string",
                                "enum": ["deleteDocument"],
                                "description": "Delete an existing document by id."
                            },
                            "actionPayload": {
                                "type": "object",
                                "additionalProperties": false,
                                "required": ["docId"],
                                "properties": {
                                    "docId": {
                                        "type": "string",
                                        "format": "uuid",
                                        "description": "UUID of the document to delete."
                                    }
                                }
                            }
                        }
                    },

                    {
                        "type": "object",
                        "additionalProperties": false,
                        "required": ["actionType", "actionPayload"],
                        "properties": {
                            "actionType": {
                                "type": "string",
                                "enum": ["openDocument"],
                                "description":
                                    "Open an existing document for the user to view and/or edit."
                            },
                            "actionPayload": {
                                "type": "object",
                                "additionalProperties": false,
                                "required": ["docId"],
                                "properties": {
                                    "docId": {
                                        "type": "string",
                                        "format": "uuid",
                                        "description": "UUID of the document to open."
                                    }
                                }
                            }
                        }
                    },

                    {
                        "type": "object",
                        "additionalProperties": false,
                        "required": ["actionType", "actionPayload"],
                        "properties": {
                            "actionType": {
                                "type": "string",
                                "enum": ["modifyDocument"],
                                "description":
                                    "Apply one or more modifications to an existing document."
                            },
                            "actionPayload": {
                                "type": "object",
                                "additionalProperties": false,
                                "required": ["docId", "modifications"],
                                "properties": {
                                    "docId": {
                                        "type": "string",
                                        "format": "uuid",
                                        "description": "UUID of the document to modify."
                                    },

                                    "modifications": {
                                        "type": "array",
                                        "minItems": 1,
                                        "description":
                                            "One or more document modifications to apply in order.",
                                        "items": {
                                            "anyOf": [
                                                
                                                {
                                                    "type": "object",
                                                    "additionalProperties": false,
                                                    "required": ["modType", "modPayload"],
                                                    "properties": {
                                                        "modType": {
                                                            "type": "string",
                                                            "enum": ["addListItem"],
                                                            "description":
                                                                "Add a new item to a list document."
                                                        },
                                                        "modPayload": {
                                                            "type": "object",
                                                            "additionalProperties": false,
                                                            "required": ["itemContent", "itemCompleted"],
                                                            "properties": {
                                                                "itemCompleted": {
                                                                    "type": "boolean",
                                                                    "description":
                                                                        "Whether the new list item is completed."
                                                                },
                                                                "itemContent": {
                                                                    "type": "string",
                                                                    "description":
                                                                        "The full text for the new list item. This becomes the item's entire content. Must not be empty."
                                                                }
                                                            }
                                                        }
                                                    }
                                                },


                                                {
                                                    "type": "object",
                                                    "additionalProperties": false,
                                                    "required": ["modType", "modPayload"],
                                                    "properties": {
                                                        "modType": {
                                                            "type": "string",
                                                            "enum": ["editListItem"],
                                                            "description":
                                                                "Replace the content of an existing list item."
                                                        },
                                                        "modPayload": {
                                                            "type": "object",
                                                            "additionalProperties": false,
                                                            "required": ["itemId", "itemContent", "itemCompleted"],
                                                            "properties": {
                                                                "itemId": {
                                                                    "type": "string",
                                                                    "format": "uuid",
                                                                    "description":
                                                                        "UUID of the list item to edit."
                                                                },
                                                                "itemCompleted": {
                                                                    "type": "boolean",
                                                                    "description":
                                                                        "Whether the list item is completed."
                                                                },
                                                                "itemContent": {
                                                                    "type": "string",
                                                                    "description":
                                                                        "Replaces the item's entire previous content (not a patch). Keep the meaning, apply the edits, and output the final full text. Must not be empty."
                                                                }
                                                            }
                                                        }
                                                    }
                                                },

                                                {
                                                    "type": "object",
                                                    "additionalProperties": false,
                                                    "required": ["modType", "modPayload"],
                                                    "properties": {
                                                        "modType": {
                                                            "type": "string",
                                                            "enum": ["deleteListItem"],
                                                            "description":
                                                                "Delete a list item completely (not just mark it as completed, only use this if the item should be truly deleted forever ie. from an error)."
                                                        },
                                                        "modPayload": {
                                                            "type": "object",
                                                            "additionalProperties": false,
                                                            "required": ["itemId"],
                                                            "properties": {
                                                                "itemId": {
                                                                    "type": "string",
                                                                    "format": "uuid",
                                                                    "description":
                                                                        "UUID of the list item to delete."
                                                                }
                                                            }
                                                        }
                                                    }
                                                },

                                                {
                                                    "type": "object",
                                                    "additionalProperties": false,
                                                    "required": ["modType", "modPayload"],
                                                    "properties": {
                                                        "modType": {
                                                            "type": "string",
                                                            "enum": ["editNote"],
                                                            "description":
                                                                "Replace the full content of a note document."
                                                        },
                                                        "modPayload": {
                                                            "type": "object",
                                                            "additionalProperties": false,
                                                            "required": ["docContent"],
                                                            "properties": {
                                                                "docContent": {
                                                                    "type": "string",
                                                                    "description":
                                                                        "Full updated note content (entire doc). Keep/repeat all existing content and simply apply the requested edits; output the final full text to replace old content."
                                                                }
                                                            }
                                                        }
                                                    }
                                                }
                                            ]
                                        }
                                    }
                                }
                            }
                        }
                    }
                ]
            }
        }
    }
}